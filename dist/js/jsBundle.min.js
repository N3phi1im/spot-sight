!function(){"use strict";function t(t,e,n,o,r,s){t.state("Home",{url:"/",templateUrl:"views/home.html",controller:"HomeController as vm"}),e.otherwise("/"),n.caseInsensitive(!0),n.strictMode(!1),o.html5Mode(!0),r.theme("default").primaryPalette("deep-orange").accentPalette("deep-purple"),s.defaultFontSet("material-icons")}t.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider","$mdThemingProvider","$mdIconProvider"],angular.module("app",["ui.router","ngMaterial"]).config(t)}(),function(){"use strict";function t(t,e,n,o){var r=this;r.user={},r.status=o.status,t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},r.register=function(){var t=r.user;return t.username&&t.password&&t.c_password&&t.password===t.c_password?void o.register(t).then(function(){e.hide()}):!1},r.login=function(){o.login(r.user).then(function(){e.hide(),n.show(n.simple().textContent("Welcome back "+r.status.username.charAt(0).toUpperCase()+r.status.username.slice(1)+"!"))})}}t.$inject=["$scope","$mdDialog","$mdToast","UserService"],angular.module("app").controller("DialogController",["$scope","$mdDialog","UserService",function(e,n,o){var r=this;r.status=o.status,r.logout=function(){localStorage.removeItem("token"),r.status.isLoggedIn=!1,r.status.callid=null,r.status.username=null},e.showTabDialog=function(e){n.show({controllerAs:"vm",controller:t,templateUrl:"views/Dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}])}(),function(){"use strict";function t(t,e){var n=this;n.list=[],n.open=!1,n.status=t.status,n.isOpen=!1,n.getAll=e.get_contacts,n.add_contact=function(t){var o={add_id:t,logged_in_id:n.status.id};e.add_contact(o).then(function(t){n.list.length=0})},n.look=function(t){n.list.length=0,e.contact_list_search(t).then(function(t){for(var e=0;e<t.length;e++)n.list.push(t[e])})},n.fab={isOpen:!1,count:0}}t.$inject=["UserService","HomeFactory"],angular.module("app").controller("HomeController",t)}(),function(){"use strict";function t(t,e,n){function o(n){var o=e.defer();return t.post("/users/search",n).success(function(t){o.resolve(t)}),o.promise}function r(n){var o=e.defer();return t.post("/users/add",n).success(function(t){o.resolve(t)}),o.promise}function s(){var n=e.defer();return t.get("/users/contacts").success(function(t){n.resolve(t)}),n.promise}var a={};return a.contact_list_search=o,a.add_contact=r,a.get_contacts=s,a}t.$inject=["$http","$q","UserService"],angular.module("app").factory("HomeFactory",t)}(),function(){"use strict";function t(t,e,n){return{request:function(e){return e.headers=e.headers||{},e.headers.Accepts="application/json",e.headers["Content-Type"]="application/json",t.localStorage.getItem("token")&&(e.headers.authorization="Bearer "+t.localStorage.getItem("token")),e}}}t.$inject=["$window","$http","$q"],angular.module("app").factory("HTTPFactory",t)}(),function(){"use strict";function t(t,e,n){function o(n){var o={username:n.username.toLowerCase(),password:n.password},r=e.defer();return t.post("/users/login",o).success(function(t){s(t.token),l.status.isLoggedIn=!0,r.resolve()}),r.promise}function r(n){var o=e.defer();return t.post("/users/register",n).success(function(t){l.login(n),o.resolve()}),o.promise}function s(t){localStorage.setItem("token",t),l.status.callid=i(),l.status.username=c(),l.status.id=u()}function a(){return localStorage.token}function i(){return JSON.parse(atob(a().split(".")[1])).callid}function c(){return JSON.parse(atob(a().split(".")[1])).username}function u(){return JSON.parse(atob(a().split(".")[1])).id}var l={};return l.status={},a()&&(l.status.isLoggedIn=!0,l.status.callid=i(),l.status.username=c(),l.status.id=u()),l.setToken=s,l.getToken=a,l.login=o,l.register=r,l}t.$inject=["$http","$q","$window"],angular.module("app").factory("UserService",t)}();