!function(){"use strict";function t(t,e,n,o,s,r,a){t.state("Home",{url:"/",templateUrl:"views/home.html",controller:"HomeController as vm"}),e.otherwise("/"),n.caseInsensitive(!0),n.strictMode(!1),o.html5Mode(!0),a.interceptors.push("HTTPFactory"),s.theme("default").primaryPalette("deep-orange").accentPalette("deep-purple"),r.defaultFontSet("material-icons")}t.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider","$mdThemingProvider","$mdIconProvider","$httpProvider"],angular.module("app",["ui.router","ngMaterial"]).config(t)}(),function(){"use strict";function t(t,e,n,o,s){var r=this;r.user={},r.status=s.status,t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},r.register=function(){var t=r.user;return t.username&&t.password&&t.c_password&&t.password===t.c_password?void s.register(t).then(function(){e.hide()}):!1},r.login=function(){s.login(r.user).then(function(){e.hide(),n.show(n.simple().textContent("Welcome back "+r.status.username.charAt(0).toUpperCase()+r.status.username.slice(1)+"!")),o.reload()})}}t.$inject=["$scope","$mdDialog","$mdToast","$state","UserService"],angular.module("app").controller("DialogController",["$scope","$mdDialog","$state","UserService",function(e,n,o,s){var r=this;r.status=s.status,r.logout=function(){localStorage.removeItem("token"),r.status.isLoggedIn=!1,r.status.callid=null,r.status.username=null,r.status.id=null,o.reload()},e.showTabDialog=function(e){n.show({controllerAs:"vm",controller:t,templateUrl:"views/Dialog.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})}}])}(),function(){"use strict";function t(t,e){var n=this;n.list=[],n.contacts=[],n.status=t.status,n.isOpen=!1,n.is=!1,n.open=function(){n.list.length=0,n.is=!1},n.getAll=function(){e.get_contacts().then(function(t){for(var e=0;e<t.length;e++)n.contacts.push(t[e])})},n.add_contact=function(t){var o={add_id:t,logged_in_id:n.status.id};e.add_contact(o).then(function(t){n.getAll(),n.list.length=0})},n.look=function(t){n.list.length=0,e.contact_list_search(t).then(function(t){for(var e=0;e<t.length;e++)n.list.push(t[e])})},localStorage.token&&n.getAll()}t.$inject=["UserService","HomeFactory"],angular.module("app").controller("HomeController",t)}(),function(){"use strict";function t(t,e,n){function o(n){var o=e.defer();return t.post("/users/search",n).success(function(t){o.resolve(t)}),o.promise}function s(n){var o=e.defer();return t.post("/users/add",n).success(function(t){o.resolve(t)}),o.promise}function r(){var n=e.defer();return t.get("/users/contacts").success(function(t){n.resolve(t)}),n.promise}var a={};return a.contact_list_search=o,a.add_contact=s,a.get_contacts=r,a}t.$inject=["$http","$q","UserService"],angular.module("app").factory("HomeFactory",t)}(),function(){"use strict";function t(t){return{request:function(e){return e.headers=e.headers||{},e.headers.Accepts="application/json",e.headers["Content-Type"]="application/json",t.localStorage.getItem("token")&&(e.headers.authorization="Bearer "+t.localStorage.getItem("token")),e}}}t.$inject=["$window"],angular.module("app").factory("HTTPFactory",t)}(),function(){"use strict";function t(t,e,n,o){function s(n){var s={username:n.username.toLowerCase(),password:n.password},r=e.defer();return t.post("/users/login",s).success(function(t){a(t.token),d.status.isLoggedIn=!0,r.resolve()}).error(function(t){o.show(o.simple().textContent(t.message))}),r.promise}function r(n){var s=e.defer();return t.post("/users/register",n).success(function(t){d.login(n),s.resolve()}).error(function(t){o.show(o.simple().textContent(t.message))}),s.promise}function a(t){localStorage.setItem("token",t),d.status.callid=c(),d.status.username=u(),d.status.id=l()}function i(){return localStorage.token}function c(){return JSON.parse(atob(i().split(".")[1])).callid}function u(){return JSON.parse(atob(i().split(".")[1])).username}function l(){return JSON.parse(atob(i().split(".")[1])).id}var d={};return d.status={},i()&&(d.status.isLoggedIn=!0,d.status.callid=c(),d.status.username=u(),d.status.id=l()),d.setToken=a,d.getToken=i,d.login=s,d.register=r,d}t.$inject=["$http","$q","$window","$mdToast"],angular.module("app").factory("UserService",t)}();